/*
 * Snap.js
 *
 * Copyright 2013, Jacob Kelley - http://jakiestfu.com/
 * Released under the MIT Licence
 * http://opensource.org/licenses/MIT
 *
 * Github:  http://github.com/jakiestfu/Snap.js/
 * Version: 1.9.2
 */
(function(n,g){var m=m||function(m){var c={element:null,dragger:null,disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:0.5,flickThreshold:50,transitionSpeed:0.3,easing:"ease",maxPosition:266,minPosition:-266,tapToClose:!0,touchToDrag:!0,slideIntent:40,minDragDistance:5},a={simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},l={},b={hasTouch:"ontouchstart"in g.documentElement||n.navigator.msPointerEnabled, eventType:function(d){return{down:b.hasTouch?"touchstart":"mousedown",move:b.hasTouch?"touchmove":"mousemove",up:b.hasTouch?"touchend":"mouseup",out:b.hasTouch?"touchcancel":"mouseout"}[d]},page:function(d,a){return b.hasTouch&&a.touches.length&&a.touches[0]?a.touches[0]["page"+d]:a["page"+d]},klass:{has:function(d,a){return-1!==d.className.indexOf(a)},add:function(a,f){!b.klass.has(a,f)&&c.addBodyClasses&&(a.className+=" "+f)},remove:function(a,b){c.addBodyClasses&&(a.className=a.className.replace(b, "").replace(/^\s+|\s+$/g,""))}},dispatchEvent:function(a){if("function"===typeof l[a])return l[a].call()},vendor:function(){var a=g.createElement("div"),b=["webkit","Moz","O","ms"],c;for(c in b)if("undefined"!==typeof a.style[b[c]+"Transition"])return b[c]},transitionCallback:function(){return"Moz"===a.vendor||"ms"===a.vendor?"transitionend":a.vendor+"TransitionEnd"},canTransform:function(){return"undefined"!==typeof c.element.style[a.vendor+"Transform"]},deepExtend:function(a,c){for(var h in c)c[h]&& c[h].constructor&&c[h].constructor===Object?(a[h]=a[h]||{},b.deepExtend(a[h],c[h])):a[h]=c[h];return a},angleOfDrag:function(d,c){var b;b=Math.atan2(-(a.startDragY-c),a.startDragX-d);0>b&&(b+=2*Math.PI);b=Math.floor(180/Math.PI*b-180);0>b&&-180<b&&(b=360-Math.abs(b));return Math.abs(b)},events:{addEvent:function(a,b,c){if(a.addEventListener)return a.addEventListener(b,c,!1);if(a.attachEvent)return a.attachEvent("on"+b,c)},removeEvent:function(a,b,c){if(a.addEventListener)return a.removeEventListener(b, c,!1);if(a.attachEvent)return a.detachEvent("on"+b,c)},prevent:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1}},parentUntil:function(a,b){for(var c="string"===typeof b;a.parentNode;){if(c&&a.getAttribute&&a.getAttribute(b)||!c&&a===b)return a;a=a.parentNode}return null}},e={translate:{get:{matrix:function(d){if(b.canTransform()){var f=n.getComputedStyle(c.element)[a.vendor+"Transform"].match(/\((.*)\)/);return f?(f=f[1].split(","),16===f.length&&(d+=8),parseInt(f[d],10)):0}return parseInt(c.element.style.left, 10)}},easeCallback:function(){c.element.style[a.vendor+"Transition"]="";a.translation=e.translate.get.matrix(4);a.easing=!1;clearInterval(a.animatingInterval);0===a.easingTo&&(b.klass.remove(g.body,"snapjs-right"),b.klass.remove(g.body,"snapjs-left"));b.dispatchEvent("animated");b.events.removeEvent(c.element,b.transitionCallback(),e.translate.easeCallback)},easeTo:function(d){b.canTransform()?(a.easing=!0,a.easingTo=d,c.element.style[a.vendor+"Transition"]="all "+c.transitionSpeed+"s "+c.easing, a.animatingInterval=setInterval(function(){b.dispatchEvent("animating")},1),b.events.addEvent(c.element,b.transitionCallback(),e.translate.easeCallback)):a.translation=d;e.translate.x(d);0===d&&(c.element.style[a.vendor+"Transform"]="")},x:function(d){if(!("left"===c.disable&&0<d||"right"===c.disable&&0>d)){if(!c.hyperextensible)if(d===c.maxPosition||d>c.maxPosition)d=c.maxPosition;else if(d===c.minPosition||d<c.minPosition)d=c.minPosition;d=parseInt(d,10);isNaN(d)&&(d=0);b.canTransform()?c.element.style[a.vendor+ "Transform"]="translate3d("+d+"px, 0,0)":(c.element.style.width=(n.innerWidth||g.documentElement.clientWidth)+"px",c.element.style.left=d+"px",c.element.style.right="")}}},drag:{listen:function(){a.translation=0;a.easing=!1;b.events.addEvent(c.element,b.eventType("down"),e.drag.startDrag);b.events.addEvent(c.element,b.eventType("move"),e.drag.dragging);b.events.addEvent(c.element,b.eventType("up"),e.drag.endDrag)},stopListening:function(){b.events.removeEvent(c.element,b.eventType("down"),e.drag.startDrag); b.events.removeEvent(c.element,b.eventType("move"),e.drag.dragging);b.events.removeEvent(c.element,b.eventType("up"),e.drag.endDrag)},startDrag:function(d){var f=d.target?d.target:d.srcElement;if(b.parentUntil(f,"data-snap-ignore"))b.dispatchEvent("ignore");else if(!c.dragger||b.parentUntil(f,c.dragger)||a.translation===c.minPosition||a.translation===c.maxPosition)b.dispatchEvent("start"),c.element.style[a.vendor+"Transition"]="",a.isDragging=!0,a.hasIntent=null,a.intentChecked=!1,a.startDragX=b.page("X", d),a.startDragY=b.page("Y",d),a.dragWatchers={current:0,last:0,hold:0,state:""},a.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},dragging:function(d){if(a.isDragging&&c.touchToDrag){var f=b.page("X",d),h=b.page("Y",d),m=a.translation,k=e.translate.get.matrix(4),l=f-a.startDragX,n=0<k,p=l;if(!a.intentChecked||a.hasIntent){c.addBodyClasses&&(0<k?(b.klass.add(g.body,"snapjs-left"),b.klass.remove(g.body, "snapjs-right")):0>k&&(b.klass.add(g.body,"snapjs-right"),b.klass.remove(g.body,"snapjs-left")));if(!1===a.hasIntent||null===a.hasIntent){var h=b.angleOfDrag(f,h),q=0<=h&&h<=c.slideIntent||360>=h&&h>360-c.slideIntent;a.hasIntent=180<=h&&h<=180+c.slideIntent||180>=h&&h>=180-c.slideIntent||q?!0:!1;a.intentChecked=!0}c.minDragDistance>=Math.abs(f-a.startDragX)||!1===a.hasIntent||(b.events.prevent(d),b.dispatchEvent("drag"),a.dragWatchers.current=f,a.dragWatchers.last>f?("left"!==a.dragWatchers.state&& (a.dragWatchers.state="left",a.dragWatchers.hold=f),a.dragWatchers.last=f):a.dragWatchers.last<f&&("right"!==a.dragWatchers.state&&(a.dragWatchers.state="right",a.dragWatchers.hold=f),a.dragWatchers.last=f),n?(b.dispatchEvent("open"),c.maxPosition<k&&(d=(k-c.maxPosition)*c.resistance,p=l-d),a.simpleStates={opening:"left",towards:a.dragWatchers.state,hyperExtending:c.maxPosition<k,halfway:k>c.maxPosition/2,flick:Math.abs(a.dragWatchers.current-a.dragWatchers.hold)>c.flickThreshold,translation:{absolute:k, relative:l,sinceDirectionChange:a.dragWatchers.current-a.dragWatchers.hold,percentage:k/c.maxPosition*100}}):(c.minPosition>k&&(d=(k-c.minPosition)*c.resistance,p=l-d),a.simpleStates={opening:"right",towards:a.dragWatchers.state,hyperExtending:c.minPosition>k,halfway:k<c.minPosition/2,flick:Math.abs(a.dragWatchers.current-a.dragWatchers.hold)>c.flickThreshold,translation:{absolute:k,relative:l,sinceDirectionChange:a.dragWatchers.current-a.dragWatchers.hold,percentage:k/c.minPosition*100}}),e.translate.x(p+ m))}}},endDrag:function(d){if(a.isDragging){b.dispatchEvent("end");var f=e.translate.get.matrix(4);0===a.dragWatchers.current&&0!==f&&c.tapToClose?(b.dispatchEvent("close"),b.events.prevent(d),e.translate.easeTo(0),a.isDragging=!1,a.startDragX=0):("left"===a.simpleStates.opening?a.simpleStates.halfway||a.simpleStates.hyperExtending||a.simpleStates.flick?a.simpleStates.flick&&"left"===a.simpleStates.towards?e.translate.easeTo(0):(a.simpleStates.flick&&"right"===a.simpleStates.towards||a.simpleStates.halfway|| a.simpleStates.hyperExtending)&&e.translate.easeTo(c.maxPosition):e.translate.easeTo(0):"right"===a.simpleStates.opening&&(a.simpleStates.halfway||a.simpleStates.hyperExtending||a.simpleStates.flick?a.simpleStates.flick&&"right"===a.simpleStates.towards?e.translate.easeTo(0):(a.simpleStates.flick&&"left"===a.simpleStates.towards||a.simpleStates.halfway||a.simpleStates.hyperExtending)&&e.translate.easeTo(c.minPosition):e.translate.easeTo(0)),a.isDragging=!1,a.startDragX=b.page("X",d))}}}};this.open= function(d){b.dispatchEvent("open");b.klass.remove(g.body,"snapjs-expand-left");b.klass.remove(g.body,"snapjs-expand-right");"left"===d?(a.simpleStates.opening="left",a.simpleStates.towards="right",b.klass.add(g.body,"snapjs-left"),b.klass.remove(g.body,"snapjs-right"),e.translate.easeTo(c.maxPosition)):"right"===d&&(a.simpleStates.opening="right",a.simpleStates.towards="left",b.klass.remove(g.body,"snapjs-left"),b.klass.add(g.body,"snapjs-right"),e.translate.easeTo(c.minPosition))};this.close=function(){b.dispatchEvent("close"); e.translate.easeTo(0)};this.expand=function(a){var c=n.innerWidth||g.documentElement.clientWidth;"left"===a?(b.dispatchEvent("expandLeft"),b.klass.add(g.body,"snapjs-expand-left"),b.klass.remove(g.body,"snapjs-expand-right")):(b.dispatchEvent("expandRight"),b.klass.add(g.body,"snapjs-expand-right"),b.klass.remove(g.body,"snapjs-expand-left"),c*=-1);e.translate.easeTo(c)};this.on=function(a,b){l[a]=b;return this};this.off=function(a){l[a]&&(l[a]=!1)};this.enable=function(){b.dispatchEvent("enable"); e.drag.listen()};this.disable=function(){b.dispatchEvent("disable");e.drag.stopListening()};this.settings=function(a){b.deepExtend(c,a)};this.state=function(){var b=e.translate.get.matrix(4);return{state:b===c.maxPosition?"left":b===c.minPosition?"right":"closed",info:a.simpleStates}};m.element&&(b.deepExtend(c,m),a.vendor=b.vendor(),e.drag.listen())};"undefined"!==typeof module&&module.exports&&(module.exports=m);"undefined"===typeof ender&&(this.Snap=m);"function"===typeof define&&define.amd&&define("snap", [],function(){return m})}).call(this,window,document); 
